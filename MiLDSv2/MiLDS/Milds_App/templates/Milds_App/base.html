<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}MiLDS{% endblock %}</title>
  <style>
    /* Layout */
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      height: 100vh;
    }
    nav {
      width: 220px;
      background: #2c3e50;
      color: #ecf0f1;
      padding: 1em;
      box-sizing: border-box;
    }
    nav h2 {
      margin-top: 0;
      font-size: 1.2em;
      border-bottom: 1px solid #7f8c8d;
      padding-bottom: .25em;
    }
    nav ul {
      list-style: none;
      padding-left: 0;
    }
    nav li {
      margin: .5em 0;
    }
    nav a {
      color: #ecf0f1;
      text-decoration: none;
    }
    nav a:hover {
      text-decoration: underline;
    }
    main {
      flex: 1;
      padding: 2em;
      overflow-y: auto;
    }
    #pull-aircraft {
      display: block;
      margin: 1em 0;
      padding: .5em 1em;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #aircraft-results {
      margin-top: 1em;
      font-family: monospace;
      white-space: pre-wrap;
      background: #f4f4f4;
      padding: 1em;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <nav>
    <h2>Aircraft</h2>
    <ul>
      <li><a href="{% url 'list_aircraft' %}">List Aircraft</a></li>
      <li><a href="{% url 'create_aircraft' %}">Add Aircraft</a></li>
    </ul>

    <!-- pull‐aircraft button lives in the nav (or anywhere you like) -->
    <button
      id="pull-aircraft"
      data-url="{% url 'aircraft_for_milds' uic=unit.uic %}"
    >Pull Aircraft</button>

    <h2>Personnel</h2>
    <ul>
      <li><a href="{% url 'list_personnel' %}">List Personnel</a></li>
      <li><a href="{% url 'create_personnel' %}">Add Personnel</a></li>
    </ul>
  </nav>

  <main>
    {% block content %}
    <!-- Page‐specific content goes here -->
    {% endblock %}
    <!-- where we’ll dump the JSON -->
    <div id="aircraft-results"></div>
  </main>

  <script>
    document
      .getElementById("pull-aircraft")
      .addEventListener("click", async function() {
        const url = this.dataset.url;
        try {
          const res = await fetch(url);
          if (!res.ok) {
            throw new Error(`${res.status} ${res.statusText}`);
          }
          const { aircraft } = await res.json();
          const out = aircraft.map(a =>
            JSON.stringify(a, null, 2)
          ).join("\n\n");
          document.getElementById("aircraft-results")
                  .textContent = out;
        } catch (err) {
          console.error("Failed to pull aircraft:", err);
          document.getElementById("aircraft-results")
                  .textContent = "Error loading aircraft.";
        }
      });
  </script>

</body>
</html>
    
